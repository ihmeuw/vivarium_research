.. _2019_cause_afib:

===============================
Atrial fibrillation and flutter 
===============================

.. contents::
   :local:
   :depth: 1

.. list-table:: Abbreviations
  :widths: 15 15 15
  :header-rows: 1

  * - Abbreviation
    - Definition
    - Note
  * - 
    - 
    - 


Disease Description
-------------------

Atrial fibrillation is an irregular and often rapid heart rate that can increase the risk of certain types of strokes, heart failure and other cardiovascular complications. 

In atrial fibrillation, the atria beat chaotically and irregularly and out of coordination with the ventricles. Symptoms often include heart palpitations, shortness of breath, and
weakness. Atrial fibrillation may be episodic or it may by consistent. A major concern with atrial fibrillation is the potential to develop blood clots within the upper chambers of the 
heart, which can circulate to other organs, particularly the brain, and lead to blockages in blood flow. 

Treatments for atrial fibrillation may include medications for rhythm and rate control. In more serious cases of disease, and other interventions such as ablation may be used to try to 
alter the heart's electrical system to prevent the errant signals that cause irregular heartbeats. 

[Mayo-Clinic-Atrial-Fibrillation-Definition]_

[Johns-Hopkins-Ablation-Definition]_



GBD 2019 Modeling Strategy
--------------------------
Atrial fibrillation is defined in the GBD as a supraventricular arrhythmia due to disorganized depolarization of the atrium. Atrial flutter is a macro-reentrant supraventricular arrhythmia, usually 
involving the cavo-tricuspid isthmus. Diagnosis requires an ECG demonstrating: 1) irregularly irregular RR intervals (in the absence of complete AV block); 2) no distinct P waves on the surface ECG, and; 
3) an atrial cycle length (when visible) that is usually variable and less than 200 milliseconds. 
 

The reference case definition is atrial fibrillation or flutter diagnosed by ECG measurement. We included data from the scientific literature on incidence, prevalence, and mortality for atrial 
fibrillation, along with administrative inpatient and claims data. These administrative claims data were adjusted to match the reference case definition using MR-BRT. 


In order to address changes in coding practices for atrial fibrillation that resulted in an implausible trend of increasing death-certificate-based mortality rates, we used a prevalence-based modelling 
approach that combined DisMod-MR and CODEm models to generate fatal and nonfatal estimates for atrial fibrillation and flutter. The steps of this modeling process are listed below. 
 

1. We estimated cause specific mortality rates (CSMR) for atrial fibrillation using a standard CODEm approach using vital registration (VR) data prior to redistribution as inputs.  

2. We estimated prevalence in DisMod-MR using data from published reports of cross-sectional and cohort surveys, as well as primary care facility data. We also used claims data covering inpatient and 
   outpatient visits for the United States along with inpatient hospital data from 247 locations in 15 countries.  

3. We calculated the excess mortality rate (EMR) for the year 2019 according to the following formula: 

   Excess mortality rate = :math:`\frac{\text{cause-specific-mortality-rate_codem}}{\text{prevalence_dismod}}`

   We then selected 17 countries based on four conditions: 1) ranking of 4 or 5 stars on the system for assessing the quality of VR data; 2) prevalence data available from the literature were included in 
   the DisMod-MR estimation; 3) prevalence rate ≥ 0.005; and, 4) CSMR ≥ 0.00002. Using information from these countries as input data, we ran a MR-BRT model of logEMR on sex, a cubic spline of age, and 
   HAQI. We then predicted year-, age- and sex-specific EMR using the results of this regression for all non-selected countries. Countries included in the regression were assigned their directly calculated values. These EMR data points were assigned to the time period 1990–2019 and uploaded into the non-fatal database in order to be used in modelling. 

4. We re-ran DisMod-MR using the input data described in Step 2 along with the EMR estimated in Step 3. The prevalence estimates from the DisMod-MR model in Step 4 was used as the finalized output for 
   upload to COMO and further processing into YLDs and DALYs. 

5. The CSMR estimates from the DisMod model in Step 4 were interpolated to yield a full time series. These estimates were then divided by the GBD all-cause mortality estimates to calculate a cause 
   fraction for atrial fibrillation and flutter. We then calculated the difference between this cause fraction and the cause fraction in the VR data generated by the CoD data preparation process by age, 
   sex, location, and year. For demographic groupings, where the cause fraction generated from the DisMod estimation process was larger than the cause fraction in VR, deaths were retrieved from other causes via the process described in Section 2.6: Correction for miscoding of Alzheimer’s and other dementias and Parkinson’s disease. After this correction process, the VR cause fraction data are processed through the standard redistribution and noise reduction algorithms.  

6. In Step 6, these adjusted cause fraction data were then used as inputs for a final CODEm model. 


*Severity splits & disability weights*

Atrial fibrillation is split into symptomatic and asymptomatic based on standard GBD proportion information. The table below includes lay descriptions and disability weights for the severity levels of 
atrial fibrillation: 


.. list-table:: Severity distribution
   :widths: 15 15 20
   :header-rows: 1

   * - Severity level
     - Lay description
     - DW (95% CI)
   * - Asymptomatic
     - No symptoms
     - N/A
   * - Symptomatic
     - Has periods of rapid and irregular heartbeats and occasional fainting
     - 0.224 (0.151–0.312)



Cause Hierarchy
+++++++++++++++

.. image:: afib_cause_hierarchy.svg

Restrictions
++++++++++++

.. list-table:: GBD 2019 Cause Restrictions
   :widths: 15 15 20
   :header-rows: 1

   * - Restriction Type
     - Value
     - Notes
   * - Male only
     -
     -
   * - Female only
     - False
     -
   * - YLL only
     - False
     -
   * - YLD only
     - False
     -
   * - YLL age group start
     - 30
     - [30, 34 years), age_group_id=11 
   * - YLL age group end
     - 125
     - [95, 125 years), age_group_id=235 
   * - YLD age group start
     - 30
     - [30, 34 years), age_group_id=11 
   * - YLD age group end
     - 125
     - [95, 125 years), age_group_id=235 


Vivarium Modeling Strategy
--------------------------

.. todo::

  Add an overview of the Vivarium modeling section.

Scope
+++++

.. todo::

  Describe which aspects of the disease this cause model is designed to
  simulate, and which aspects it is **not** designed to simulate.

Assumptions and Limitations
+++++++++++++++++++++++++++

.. todo::

  Describe the clinical and mathematical assumptions made for this cause model,
  and the limitations these assumptions impose on the applicability of the
  model.

Cause Model Diagram
+++++++++++++++++++

State and Transition Data Tables
++++++++++++++++++++++++++++++++

This section gives necessary information to software engineers for building the model. 
This section usually contains four tables: Definitions, State Data, Transition Data and Data Sources.

Definitions
"""""""""""

This table contains the definitions of all the states in **cause model diagram**. 

.. list-table:: State Definitions
   :widths: 5 5 20
   :header-rows: 1

   * - State
     - State Name
     - Definition
   * - 
     - 
     - 
   * - 
     - 
     - 

For example, the *Definitions* table for *SIR* and *With-Condition and Free of Condition Model* models are as below:

**SIR Model**

.. list-table:: State Definitions
   :widths: 5 5 20
   :header-rows: 1

   * - State
     - State Name
     - Definition
   * - S
     - Susceptible
     - Susceptible to {cause name}
   * - I
     - Infected
     - Infected with {cause name}
   * - R
     - Recovered
     - Infected with {cause name}


**With-Condition and Free of Condition Model**

.. list-table:: State Definitions
   :widths: 1, 5, 10
   :header-rows: 1

   * - State
     - State Name
     - Definition
   * - C
     - With **C**\ ondition
     - Born with {cause name}
   * - F
     - **F**\ ree of Condition
     - Born without {cause name}

Include states, their names and definitions appropriate to your model.

States Data
"""""""""""

This table contains the **measures** and their **values** for each state in cause-model diagram. This information is used to 
initialize the model. The common measures in each state are prevalence, birth prevalence, excess mortality rate and disability weights. 
Cause specific mortality rate is the common measure for all states. In most of the models either prevalence or birth prevalence is used. 
But in some rare cases like neonatal models both prevalence and birth prevalence are used in model initialization. The Value column contains the formula to calculate 
the measure in each state.

The structure of the table is as below. For each state, the measures and values must be included.

.. list-table:: States Data
   :widths: 20 25 30 30
   :header-rows: 1
   
   * - State
     - Measure
     - Value
     - Notes
   * - State
     - prevalence
     - 
     - 
   * - State
     - birth prevalence
     - 
     - 
   * - State
     - excess mortality rate
     - 
     - 
   * - State
     - disabilty weights
     - 
     -
   * - ALL
     - cause specific mortality rate
     - 
     - 

An example of SI model with both prevalence and birth prevalence in the initialization is given below to explain better. 


.. list-table:: States Data
   :widths: 20 25 30 30
   :header-rows: 1
   
   * - State
     - Measure
     - Value
     - Notes
   * - S
     - prevalence
     - 1-prevalence_cid
     - 
   * - S
     - birth prevalence
     - 1-birth_prevalence_cid
     - 
   * - S
     - excess mortality rate
     - 0
     - 
   * - S
     - disabilty weights
     - 0
     -
   * - I
     - prevalence
     - prevalence_cid
     - 
   * - I
     - birth prevalence
     - birth_prevalence_cid
     - 
   * - I
     - excess mortality rate
     - :math:`\frac{\text{deaths_cid}}{\text{population} \times \text{prevalence_cid}}`
     - = (cause-specific mortality rate) / prevalence
   * - I
     - disability weights
     - :math:`\displaystyle{\sum_{s\in \text{sequelae_cid}}} \scriptstyle{\text{disability_weight}_s \,\times\, \text{prevalence}_s}`
     - = total disability weight over all sequelae
   * - ALL
     - cause specific mortality rate
     - :math:`\frac{\text{deaths_cid}}{\text{population}}`
     - 

Transition Data
"""""""""""""""

This table contains the measures needed for transition from one state to other in the cause model. The common measures used are *incident rate* to 
move from Susceptible to Infected and *remission rate* to move from Infected to Susceptible or Recovered states. Some times there may not be transition 
between states as in Neonatal disorders.

The structure of the table is as below. 

.. list-table:: Transition Data
   :widths: 10 10 10 20 30
   :header-rows: 1
   
   * - Transition
     - Source 
     - Sink 
     - Value
     - Notes
   * - i
     - S
     - I
     - 
     - 
   * - r
     - I
     - R
     - 	
     - 
 

An example, if the data is present in GBD,

.. list-table:: Transition Data
   :widths: 10 10 10 20 30
   :header-rows: 1
   
   * - Transition
     - Source 
     - Sink 
     - Value
     - Notes
   * - i
     - S
     - I
     - :math:`\frac{\text{incidence_rate_cid}}{\text{1 - prevalence_cid}}`
     - 
   * - r
     - I
     - R
     - remission_rate_cid
     - 

Sometimes, we might need to use *modelable entity id* to get data. Sometimes, we might need to calculate remission rate 
based on average case duration. In that case, the row would look like,

.. list-table:: Transition Data
   :widths: 10 10 10 20 30
   :header-rows: 1
   
   * - Transition
     - Source 
     - Sink 
     - Value
     - Notes
   * - r
     - I
     - R
     - remission_rate_cid :math:`= \frac{\text{365 person-days}}{\text{average case duration in days} \times \text{1 year}}`
     - 
	 

Data Sources
""""""""""""

This table contains the data sources for all the measures. The table structure and common measures are as below:

.. list-table:: Data Sources
   :widths: 20 25 25 25
   :header-rows: 1
   
   * - Measure
     - Sources
     - Description
     - Notes
   * - prevalence_cid
     - 
     - 
     - 
   * - birth_prevalence_cid
     - 
     - 
     -
   * - deaths_cid
     - 
     - 
     - 
   * - population
     - 
     - 
     - 
   * - sequelae_cid
     - 
     - 
     - 
   * - incidence_rate_cid
     - 
     - 
     - 
   * - remission_rate_m1594
     - 
     - 
     - 
   * - disability_weight_s{`sid`}
     - 
     - 
     - 
   * - prevalence_s{`sid`}
     - 
     - 
     - 

An example, that contains common sources for the measures,

.. list-table:: Data Sources
   :widths: 20 25 25 25
   :header-rows: 1
   
   * - Measure
     - Sources
     - Description
     - Notes
   * - prevalence_cid
     - como
     - Prevalence of cause
     - 
   * - birth_prevalence_cid
     - como
     - Birth prevalence of cause
     -
   * - deaths_cid
     - codcorrect
     - Deaths from cause
     - 
   * - population
     - demography
     - Mid-year population for given age/sex/year/location
     - 
   * - sequelae_cid
     - gbd_mapping
     - List of sequelae
     - 
   * - incidence_rate_cid/mid
     - como/dismod
     - Incidence rate for cause
     - 
   * - remission_rate_cid/mid
     - como/dismod
     - Remission rate for cause
     - 
   * - disability_weight_s{`sid`}
     - YLD appendix
     - Disability weight of sequela with id `sid`
     - 
   * - prevalence_s{`sid`}
     - como
     - Prevalence of sequela with id `sid`
     - 


Validation Criteria
+++++++++++++++++++

References
----------

.. [Mayo-Clinic-Atrial-Fibrillation-Definition]
    `Atrial Fibrillation.` Mayo Clinic, Mayo Foundation for Medical Education and Research, 20 June 2019, www.mayoclinic.org/diseases-conditions/atrial-fibrillation/symptoms-causes/syc-20350624. 


.. [Johns-Hopkins-Ablation-Definition]
    `Atrial Fibrillation Ablation.` Johns Hopkins Medicine, www.hopkinsmedicine.org/health/treatment-tests-and-therapies/atrial-fibrillation-ablation. 

